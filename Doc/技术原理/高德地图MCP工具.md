# 高德地图 MCP 工具文档

## 工具概述
高德地图 MCP 工具是一组封装了高德地图 Web 服务 API 的工具集，提供了地理编码、路径规划、天气查询等功能。所有工具返回 JSON 格式数据。

## 通用参数说明
1. 坐标格式：
   - 所有经纬度坐标均使用 "经度,纬度" 格式
   - 经纬度小数点不超过6位
   - 多个坐标点使用"|"分隔

2. 分页参数：
   - offset: 每页记录数，默认20
   - page: 当前页数，默认1

3. 返回结果控制：
   - extensions: 
     - base: 返回基本信息
     - all: 返回全部信息
  
#### POI类型说明
POI（Point of Interest，兴趣点）分为以下大类：

> 说明：POI分类共分为三级，包括大类、中类和小类。大类为一级分类（如"餐饮服务"），下设中类（如"中餐厅"），中类下再细分为小类（如"川菜"、"粤菜"等）。文档下方各POI类型均按此结构展开。

1. 汽车服务：
    - 汽车服务相关
      * 汽车服务相关
    - 加油站
      * 加油站
      * 中国石化
      * 中国石油
      * 壳牌
      * 美孚
      * 加德士
      * 东方
      * 中石油碧辟
      * 中石化碧辟
      * 道达尔
      * 埃索
      * 中化道达尔
    - 其它能源站
      * 其它能源站
    - 加气站
      * 加气站
    - 汽车养护/装饰
      * 汽车养护
      * 加水站
    - 洗车场
      * 洗车场
    - 汽车俱乐部
      * 汽车俱乐部
    - 汽车救援
      * 汽车救援
    - 汽车配件销售
      * 汽车配件销售
    - 汽车租赁
      * 汽车租赁
      * 汽车租赁还车
    - 二手车交易
      * 二手车交易
    - 充电站
      * 充电站
      * 换电站
      * 充换电站
      * 专用充电站
2. 汽车销售：汽车销售、汽车展厅等
3. 汽车维修：汽车维修、汽车美容等
4. 摩托车服务：摩托车维修、摩托车销售等
5. 餐饮服务：
   - 中餐厅
     * 综合酒楼
     * 四川菜(川菜)
     * 广东菜(粤菜)
     * 山东菜(鲁菜)
     * 江苏菜
     * 浙江菜
     * 上海菜
     * 湖南菜(湘菜)
     * 安徽菜(徽菜)
     * 福建菜
     * 北京菜
     * 湖北菜(鄂菜)
     * 东北菜
     * 云贵菜
     * 西北菜
     * 老字号
     * 火锅店
     * 特色/地方风味餐厅
     * 海鲜酒楼
     * 中式素菜馆
     * 清真菜馆
     * 台湾菜
     * 潮州菜
   - 外国餐厅
     * 西餐厅(综合风味)
     * 日本料理
     * 韩国料理
     * 法式菜品餐厅
     * 意式菜品餐厅
     * 泰国/越南菜品餐厅
     * 地中海风格菜品
     * 美式风味
     * 印度风味
     * 英国式菜品餐厅
     * 牛扒店(扒房)
     * 俄国菜
     * 葡国菜
     * 德国菜
     * 巴西菜
     * 墨西哥菜
     * 其它亚洲菜
   - 快餐厅
     * 肯德基
     * 麦当劳
     * 必胜客
     * 永和豆浆
     * 茶餐厅
     * 大家乐
     * 大快活
     * 美心
     * 吉野家
     * 仙跡岩
     * 呷哺呷哺
   - 休闲餐饮场所
   - 咖啡厅
     * 星巴克咖啡
     * 上岛咖啡
     * Pacific Coffee Company
     * 巴黎咖啡店
   - 茶艺馆
   - 冷饮店
   - 糕饼店
   - 甜品店
6. 购物服务：
    - 购物相关场所
      * 购物相关场所
    - 商场
      * 商场
      * 购物中心
      * 普通商场
      * 免税品店
    - 便民商店/便利店
      * 便民商店/便利店
      * 7-ELEVEn便利店
      * OK便利店
    - 家电电子卖场
      * 家电电子卖场
      * 综合家电商场
      * 国美
      * 大中
      * 苏宁
      * 手机销售
      * 数码电子
      * 丰泽
      * 苏宁镭射
    - 超级市场
      * 超市
      * 家乐福
      * 沃尔玛
      * 华润
      * 北京华联
      * 上海华联
      * 麦德龙
      * 乐天玛特
      * 华堂
      * 卜蜂莲花
      * 屈臣氏
      * 惠康超市
      * 百佳超市
      * 万宁超市
    - 花鸟鱼虫市场
      * 花鸟鱼虫市场
      * 花卉市场
      * 宠物市场
    - 家居建材市场
      * 家居建材市场
      * 家具建材综合市场
      * 家具城
      * 建材五金市场
      * 厨卫市场
      * 布艺市场
      * 灯具瓷器市场
    - 综合市场
      * 综合市场
      * 小商品市场
      * 旧货市场
      * 农副产品市场
      * 果品市场
      * 蔬菜市场
      * 水产海鲜市场
    - 文化用品店
      * 文化用品店
    - 体育用品店
      * 体育用品店
      * 李宁专卖店
      * 耐克专卖店
      * 阿迪达斯专卖店
      * 锐步专卖店
      * 彪马专卖店
      * 高尔夫用品店
      * 户外用品
    - 特色商业街
      * 特色商业街
      * 步行街
    - 服装鞋帽皮具店
      * 服装鞋帽皮具店
      * 品牌服装店
      * 品牌鞋店
      * 品牌皮具店
      * 品牌箱包店
    - 专卖店
      * 专营店
      * 古玩字画店
      * 珠宝首饰工艺品
      * 钟表店
      * 眼镜店
      * 书店
      * 音像店
      * 儿童用品店
      * 自行车专卖店
      * 礼品饰品店
      * 烟酒专卖店
      * 宠物用品店
      * 摄影器材店
      * 宝马生活方式
      * 土特产专卖店
    - 特殊买卖场所
      * 特殊买卖场所
      * 拍卖行
      * 典当行
    - 个人用品/化妆品店
      * 其它个人用品店
      * 莎莎
7. 生活服务：美容美发、洗衣店、照相馆等
8. 体育休闲服务：
    - 体育休闲服务场所
      * 体育休闲服务场所
    - 运动场馆
      * 运动场所
      * 综合体育馆
      * 保龄球馆
      * 网球场
      * 篮球场馆
      * 足球场
      * 滑雪场
      * 溜冰场
      * 户外健身场所
      * 海滨浴场
      * 游泳馆
      * 健身中心
      * 乒乓球馆
      * 台球厅
      * 壁球场
      * 马术俱乐部
      * 赛马场
      * 橄榄球场
      * 羽毛球场
      * 跆拳道场馆
    - 高尔夫相关
      * 高尔夫相关
      * 高尔夫球场
      * 高尔夫练习场
    - 娱乐场所
      * 娱乐场所
      * 夜总会
      * KTV
      * 迪厅
      * 酒吧
      * 游戏厅
      * 棋牌室
      * 博彩中心
      * 网吧
    - 度假疗养场所
      * 度假疗养场所
      * 度假村
      * 疗养院
    - 休闲场所
      * 休闲场所
      * 游乐场
      * 垂钓园
      * 采摘园
      * 露营地
      * 水上活动中心
    - 影剧院
      * 影剧院相关
      * 电影院
      * 音乐厅
      * 剧场
9. 医疗保健服务：
    - 医疗保健服务场所
      * 医疗保健服务场所
    - 综合医院
      * 综合医院
      * 三级甲等医院
      * 卫生院
    - 专科医院
      * 专科医院
      * 整形美容
      * 口腔医院
      * 眼科医院
      * 耳鼻喉医院
      * 胸科医院
      * 骨科医院
      * 肿瘤医院
      * 脑科医院
      * 妇科医院
      * 精神病医院
      * 传染病医院
    - 诊所
      * 诊所
    - 急救中心
      * 急救中心
    - 疾病预防机构
      * 疾病预防
    - 医药保健销售店
      * 医药保健相关
      * 药房
      * 医疗保健用品
    - 动物医疗场所
      * 动物医疗场所
      * 宠物诊所
      * 兽医站
    - 核酸检测
      * 核酸检测
10. 住宿服务：酒店、旅馆、民宿等
    - 住宿服务相关
      * 住宿服务相关
    - 宾馆酒店
      * 宾馆酒店
      * 奢华酒店
      * 五星级宾馆
      * 四星级宾馆
      * 三星级宾馆
      * 经济型连锁酒店
    - 旅馆招待所
      * 旅馆招待所
      * 青年旅舍
11. 风景名胜：
    - 风景名胜相关
      * 旅游景点
    - 公园广场
      * 公园广场
      * 公园
      * 动物园
      * 植物园
      * 水族馆
      * 城市广场
      * 公园内部设施
    - 风景名胜
      * 风景名胜
      * 世界遗产
      * 国家级景点
      * 省级景点
      * 纪念馆
      * 寺庙道观
      * 教堂
      * 回教寺
      * 海滩
      * 观景点
      * 红色景区
12. 商务住宅：写字楼、住宅区、商务中心等
13. 政府机构及社会团体：政府部门、社会团体等
14. 科教文化服务：
    - 科教文化场所
      * 科教文化场所
    - 博物馆
      * 博物馆
      * 奥迪博物馆
      * 梅赛德斯-奔驰博物馆
    - 展览馆
      * 展览馆
      * 室内展位
    - 会展中心
      * 会展中心
    - 美术馆
      * 美术馆
    - 图书馆
      * 图书馆
    - 科技馆
      * 科技馆
    - 天文馆
      * 天文馆
    - 文化宫
      * 文化宫
    - 档案馆
      * 档案馆
    - 文艺团体
      * 文艺团体
    - 传媒机构
      * 传媒机构
      * 电视台
      * 电台
      * 报社
      * 杂志社
      * 出版社
    - 学校
      * 学校
      * 高等院校
      * 中学
      * 小学
      * 幼儿园
      * 成人教育
      * 职业技术学校
      * 学校内部设施
    - 科研机构
      * 科研机构
    - 培训机构
      * 培训机构
    - 驾校
      * 驾校
15. 交通设施服务：
    - 交通服务相关
      * 交通服务相关
    - 机场相关
      * 机场相关
      * 候机室
      * 摆渡车站
      * 飞机场
      * 机场出发/到达
      * 直升机场
      * 机场货运处
    - 火车站
      * 火车站
      * 候车室
      * 进站口/检票口
      * 出站口
      * 站台
      * 售票
      * 退票
      * 改签
      * 公安制证
      * 票务相关
      * 货运火车站
    - 港口码头
      * 港口码头
      * 客运港
      * 车渡口
      * 人渡口
      * 货运港口码头
      * 进港
      * 出港
      * 候船室
    - 长途汽车站
      * 长途汽车站
      * 进站
      * 出站
      * 候车室
    - 地铁站
      * 地铁站
      * 出入口
    - 轻轨站
      * 轻轨站
    - 公交车站
      * 公交车站相关
      * 旅游专线车站
      * 普通公交站
      * 机场巴士
      * 快速公交站
      * 电车站
      * 智轨车站
    - 班车站
      * 班车站
    - 停车场
      * 停车场相关
      * 换乘停车场
      * 公共停车场
      * 专用停车场
      * 路边停车场
      * 停车场入口
      * 停车场出口
      * 停车场出入口
    - 过境口岸
      * 过境口岸
      * 旅检楼
      * 出境
      * 入境
    - 出租车
      * 出租车
    - 轮渡站
      * 轮渡站
    - 索道站
      * 索道站
    - 上下客区
      * 上下客区
      * 自驾车
      * 出租车
      * 大巴车
      * 网约车
      * 摩托车
16. 金融保险服务：银行、保险公司、证券公司等
17. 公司企业：各类企业等
18. 道路附属设施：路灯、收费站、红绿灯等
19. 地名地址信息：门牌地址、道路等
20. 公共设施：公共厕所、垃圾箱、邮筒等
21. 事件活动：
    - 事件活动
      * 事件活动
    - 公众活动
      * 公众活动
      * 节日庆典
      * 展会展览
      * 体育赛事
      * 文艺演出
      * 大型会议
      * 运营活动
      * 商场活动
    - 突发事件
      * 突发事件
      * 自然灾害
      * 事故灾难
      * 城市新闻
      * 公共卫生事件
      * 公共社会事件
22. 室内设施：楼层、功能区等
23. 虚拟数据：虚拟POI点等
24. 通行设施：人行横道、天桥、地下通道等

在使用text_search和around_search接口时，可以通过types参数指定上述POI类型进行筛选。

## 完整工具列表（12个）

### 1. 地理编码与逆地理编码
#### geo
- 功能：将结构化地址转换为经纬度坐标
- 必选参数：
  - address: 结构化地址信息（省+市+区+街道+门牌号）
- 可选参数：
  - city: 指定查询的城市（城市中文、中文全拼、citycode、adcode）

示例：
```javascript
// 地址转坐标
{
  "method": "tools/call",
  "params": {
    "name": "geo",
    "arguments": {
      "address": "海口湾广场",
      "city": "海口"
    },
    "_meta": {
      "progressToken": 19
    }
  }
}

// 返回结果
{
  "status": "1",
  "info": "OK",
  "infocode": "10000",
  "count": "1",
  "geocodes": [
    {
      "formatted_address": "海南省海口市美兰区海口湾广场",
      "country": "中国",
      "province": "海南省",
      "citycode": "0898",
      "city": "海口市",
      "district": "美兰区",
      "township": [],
      "neighborhood": {
        "name": [],
        "type": []
      },
      "building": {
        "name": [],
        "type": []
      },
      "adcode": "460108",
      "street": [],
      "number": [],
      "location": "110.312028,20.055884",
      "level": "兴趣点"
    }
  ]
}

{
  "method": "tools/call",
  "params": {
    "name": "geo",
    "arguments": {
      "address": "假日海滩",
      "city": "海口"
    },
    "_meta": {
      "progressToken": 13
    }
  }
}
{
  "status": "1",
  "info": "OK",
  "infocode": "10000",
  "count": "1",
  "geocodes": [
    {
      "formatted_address": "海南省海口市秀英区假日海滩",
      "country": "中国",
      "province": "海南省",
      "citycode": "0898",
      "city": "海口市",
      "district": "秀英区",
      "township": [],
      "neighborhood": {
        "name": [],
        "type": []
      },
      "building": {
        "name": [],
        "type": []
      },
      "adcode": "460105",
      "street": [],
      "number": [],
      "location": "110.237390,20.036904",
      "level": "住宅区"
    }
  ]
}
```

#### regeocode
- 功能：将经纬度坐标转换为结构化地址
- 必选参数：
  - location: 经纬度坐标（格式：经度,纬度）
- 可选参数：
  - extensions: 返回结果控制（base/all）
  - radius: 搜索半径
  - roadlevel: 道路等级（1表示仅输出主干道路）

示例：
```javascript
// 坐标转地址
{
  "location": "102.706432,24.974034"
}

// 返回结果
{
  "status": "1",
  "regeocode": {
    "formatted_address": "云南省昆明市五华区翠湖公园",
    "addressComponent": {
      "province": "云南省",
      "city": "昆明市",
      "district": "五华区",
      "township": "翠湖公园"
    }
  }
}
```

### 2. 路径规划类
#### direction_driving
- 功能：驾车路径规划
- 必选参数：
  - origin: 起点经纬度（格式：经度,纬度）
  - destination: 终点经纬度（格式：经度,纬度）
- 可选参数：
  - strategy: 导航策略
  - waypoints: 途经点（最多16个坐标点）
  - avoidpolygons: 避让区域
  - avoidroad: 避让道路

示例：
```javascript
// 驾车导航
{
  "origin": "102.706432,24.974034",
  "destination": "102.713001,24.977751",
  "strategy": 0,
  "waypoints": "102.708432,24.975034"
}

// 返回结果
{
  "status": "1",
  "route": {
    "paths": [{
      "distance": "2.3",  // 公里
      "duration": "15",   // 分钟
      "steps": [
        // 导航路径详情
      ]
    }]
  }
}
```

#### direction_walking
- 功能：步行路径规划
- 必选参数：
  - origin: 起点经纬度
  - destination: 终点经纬度

示例：
```javascript
// 步行导航
{
  "origin": "102.706432,24.974034",
  "destination": "102.713001,24.977751"
}

// 返回结果
{
  "status": "1",
  "route": {
    "paths": [{
      "distance": "1.2",  // 公里
      "duration": "20",   // 分钟
      "steps": []
    }]
  }
}
```

#### direction_transit_integrated
- 功能：公交路径规划
- 必选参数：
  - origin: 起点经纬度
  - destination: 终点经纬度
  - city: 起点城市
- 可选参数：
  - cityd: 终点城市（跨城必填）
  - strategy: 规划策略（0-5）
  - nightflag: 是否计算夜班车（0/1）
  - date: 出发日期
  - time: 出发时间

**strategy 策略说明：**

| 值  | 含义       | 说明                       |
|-----|------------|----------------------------|
| 0   | 推荐       | 综合考虑时间、换乘、步行等 |
| 1   | 最少时间   | 优先选择用时最短的路线     |
| 2   | 最少换乘   | 优先选择换乘次数最少的路线 |
| 3   | 最少步行   | 优先选择步行距离最短的路线 |
| 4   | 最少费用   | 优先选择费用最低的路线     |
| 5   | 不乘地铁   | 避免地铁，仅选择地面公交   |

例如：如果想优先选择最少换乘，可设置 `strategy: 2`。

示例：
```javascript
// 公交换乘
{
  "origin": "102.706432,24.974034",
  "destination": "102.713001,24.977751",
  "city": "昆明",
  "strategy": 0,
  "nightflag": 0
}

// 返回结果
{
  "status": "1",
  "route": {
    "transits": [{
      "cost": "2",          // 花费
      "duration": "35",     // 分钟
      "walking_distance": "400", // 步行距离
      "segments": []        // 换乘细节
    }]
  }
}
```

#### bicycling
- 功能：骑行路径规划
- 必选参数：
  - origin: 起点经纬度
  - destination: 终点经纬度

示例：
```javascript
// 骑行导航
{
  "origin": "102.706432,24.974034",
  "destination": "102.713001,24.977751"
}

// 返回结果
{
  "status": "1",
  "data": {
    "paths": [{
      "distance": "1.8",    // 公里
      "duration": "12",     // 分钟
      "steps": []
    }]
  }
}
```

### 3. 搜索类



#### text_search
- 功能：关键词搜索 POI
- 必选参数：
  - keywords: 搜索关键词
- 可选参数：
  - city: 城市名称
  - types: POI类型
  - offset: 每页记录数
  - page: 当前页数
  - extensions: 返回结果控制（base/all）

示例：
```javascript
// 搜索景点
{
  "keywords": "翠湖公园",
  "city": "昆明",
  "types": "风景名胜",
  "offset": 20,
  "page": 1
}

// 返回结果
{
  "status": "1",
  "pois": [{
    "id": "B0367065BF",
    "name": "翠湖公园",
    "type": "风景名胜",
    "address": "翠湖南路67号",
    "location": "102.706432,24.974034"
  }]
}
```

#### around_search
- 功能：周边搜索
- 必选参数：
  - location: 中心点坐标
- 可选参数：
  - keywords: 搜索关键词
  - types: POI类型
  - radius: 搜索半径（米）
  - offset: 每页记录数
  - page: 当前页数

示例：
```javascript
// 搜索周边餐厅
{
  "location": "110.312589,20.055793",//海南省海口市美兰区华彩·海口湾广场
  "keywords": "餐厅",
  "types": "餐饮服务",
  "radius": 1000
}

// 返回结果
{
  "status": "1",
  "pois": [{
    "name": "示例餐厅",
    "type": "餐饮服务",
    "distance": "500",
    "location": "102.707432,24.975034"
  }]
}


```

#### search_detail
- 功能：获取 POI 详细信息
- 必选参数：
  - id: POI ID（POI ID可通过text_search或around_search接口获取，详见下方说明）

> 说明：
> POI ID（兴趣点唯一标识）通常通过关键词搜索（text_search）或周边搜索（around_search）接口获取。在这些接口的返回结果中，每个POI对象都包含一个id字段，即POI ID。例如：
> 
> ```json
> // text_search返回示例
> {
>   "status": "1",
>   "pois": [{
>     "id": "B0367065BF",   // 这里就是POI ID
>     "name": "翠湖公园",
>     ...
>   }]
> }
> ```
> 
> 获取到POI ID后，可用于search_detail接口查询该POI的详细信息。

示例：
```javascript
// 获取POI详情
{
  "id": "B0367065BF"
}

// 返回结果
{
  "status": "1",
  "poi": {
    "id": "B0367065BF",
    "name": "翠湖公园",
    "type": "风景名胜",
    "tel": "0871-xxxxxxxx",
    "website": "http://example.com",
    "opening_hours": "06:00-22:00"
  }
}
```

### 4. 其他服务
#### weather
- 功能：查询指定城市的天气情况
- 必选参数：
  - city: 城市名称或 adcode
- 返回数据包含：
  - 城市信息
  - 实时天气
  - 预报天气（未来4天）

示例：
```javascript
// 查询天气
{
  "city": "昆明"
}

// 返回结果
{
  "status": "1",
  "lives": [{
    "city": "昆明市",
    "weather": "晴",
    "temperature": "22",
    "winddirection": "南",
    "windpower": "3"
  }],
  "forecasts": [
    // 未来天气预报
  ]
}
```

#### distance
- 功能：测量两点间距离
- 必选参数：
  - origins: 起点经纬度（支持多个起点）
  - destination: 终点经纬度
- 可选参数：
  - type: 测量方式（可选，默认0）
    - 0：直线距离（欧氏距离/球面距离）
    - 1：驾车导航距离（按道路规划的实际驾车距离）
    - 3：步行导航距离（按步行路径规划的实际距离）

示例：
```javascript
// 测量距离
{
  "origins": "102.706432,24.974034",
  "destination": "102.713001,24.977751",
  "type": "1"  // 0：直线距离，1：驾车导航距离，3：步行导航距离；默认选择1
}

// 返回结果
{
  "status": "1",
  "results": [{
    "origin_id": "0",
    "distance": "1234",  // 米
    "duration": "300"    // 秒（驾车时间）
  }]
}
```

#### ip_location
- 功能：IP定位
- 必选参数：
  - ip: IP地址（不填则使用当前请求的IP）
- 返回数据包含：
  - IP所在城市
  - 经纬度位置
  - 所在省份

示例：
```javascript
// IP定位
{
  "ip": "114.242.xxx.xxx"
}

// 返回结果
{
  "status": "1",
  "province": "云南省",
  "city": "昆明市",
  "rectangle": "102.706432,24.974034;102.713001,24.977751"  // 所在城市经纬度范围
}
```

## 错误处理
所有接口的返回结果都包含 status 字段：
- "1": 成功
- "0": 失败

失败时会返回详细的错误信息：
```javascript
{
  "status": "0",
  "info": "INVALID_USER_KEY",
  "infocode": "10001"
}
```

## 注意事项
1. 所有坐标参数均使用经度,纬度格式
2. 经纬度小数点不超过6位
3. 跨城市公交路径规划需要同时提供起终点城市
4. 部分接口有调用频率限制
5. 返回的所有数据均为 JSON 格式
6. 建议在使用前先测试接口的可用性
7. 注意处理返回数据中的错误信息
8. 对于大批量请求，建议做好请求频率控制
9. 关键词搜索时，建议提供城市信息以提高准确性
