# 版本记录

## 提交规范 (Commit Convention)

为了保持项目历史的清晰性和可维护性，请严格遵循以下提交信息规范：

### 提交信息格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Type 类型说明

- **feat**: 新功能 (feature)
- **fix**: 修复bug
- **docs**: 文档更新
- **style**: 代码格式调整（不影响代码运行的变动）
- **refactor**: 重构（既不是新增功能，也不是修改bug的代码变动）
- **perf**: 性能优化
- **test**: 增加或修改测试
- **build**: 影响构建系统或外部依赖的变动
- **ci**: 修改CI配置文件和脚本
- **chore**: 其他不修改src或test文件的变动
- **revert**: 回滚之前的提交

### Scope 范围说明

- **app**: 应用主体功能
- **mcp**: MCP客户端相关
- **ui**: 用户界面
- **api**: API接口
- **config**: 配置文件
- **docs**: 文档
- **test**: 测试相关
- **deps**: 依赖管理

### 提交信息示例

```bash
# 新功能
feat(app): 添加旅行偏好设置功能

实现用户旅行偏好的保存和读取功能，包括：
- 旅行目的选择
- 预算范围设置
- 住宿偏好配置

Closes #123

# 修复bug
fix(mcp): 修复MCP客户端连接超时问题

- 增加连接重试机制
- 优化超时处理逻辑
- 添加错误日志记录

# 文档更新
docs(readme): 更新安装和配置说明

# 重构
refactor(app): 重构旅行规划模块

将原有的单一函数拆分为多个职责明确的类，提高代码可维护性

# 性能优化
perf(app): 优化地图数据加载性能

通过缓存机制减少API调用次数，提升页面加载速度约30%
```

### 提交最佳实践

1. **主题行限制在50字符以内**
2. **使用祈使句（如"添加"而不是"添加了"）**
3. **正文每行不超过72字符**
4. **如果提交关闭了issue，在footer中添加 `Closes #issue-number`**
5. **Breaking changes必须在footer中说明，以 `BREAKING CHANGE:` 开头**

### 分支命名规范

- **feature/**: 新功能分支，如 `feature/user-preferences`
- **fix/**: bug修复分支，如 `fix/mcp-connection-timeout`
- **docs/**: 文档更新分支，如 `docs/update-readme`
- **refactor/**: 重构分支，如 `refactor/travel-planner`
- **hotfix/**: 紧急修复分支，如 `hotfix/critical-security-issue`

---

## 开源协作指南

### 项目信息
- **GitHub仓库**: [Keldon-Pro/City-Tour-Agent](https://github.com/Keldon-Pro/City-Tour-Agent)
- **许可证**: MIT License
- **主要维护者**: Keldon
- **项目状态**: 活跃开发中

### 贡献方式

#### 1. 报告问题 (Issues)
- 使用Issue模板报告bug
- 提出功能建议
- 询问使用问题
- 建议改进意见

#### 2. 贡献代码 (Pull Requests)

**步骤流程**:
1. Fork项目到你的GitHub账户
2. 克隆你的fork到本地: `git clone https://github.com/your-username/City-Tour-Agent.git`
3. 创建功能分支: `git checkout -b feature/amazing-feature`
4. 遵循提交规范进行提交
5. 推送到你的分支: `git push origin feature/amazing-feature`
6. 创建Pull Request

**PR要求**:
- 清晰的PR标题和描述
- 关联相关的Issue
- 包含必要的测试
- 遵循代码风格规范
- 更新相关文档

#### 3. 代码审查流程

**审查标准**:
- 代码质量和风格一致性
- 功能完整性和正确性
- 测试覆盖率
- 文档完整性
- 向后兼容性

**审查角色**:
- **Core Maintainer**: Keldon (最终审批权)
- **Reviewer**: 有经验的贡献者
- **Contributor**: 代码提交者

### 协作规范

#### Issue管理
- **Bug Report**: 使用`bug`标签，包含复现步骤
- **Feature Request**: 使用`enhancement`标签，说明需求背景
- **Documentation**: 使用`documentation`标签
- **Question**: 使用`question`标签，优先查看已有文档

#### 标签系统
- `bug`: 需要修复的问题
- `enhancement`: 新功能或改进
- `documentation`: 文档相关
- `good first issue`: 适合新手的问题
- `help wanted`: 需要社区帮助
- `priority-high`: 高优先级
- `priority-low`: 低优先级

#### 里程碑管理
- **v0.9.0**: 功能完善版本
- **v1.0.0**: 正式发布版本
- **v1.1.0**: 功能扩展版本

### 社区准则

#### 行为准则
1. **尊重**: 尊重所有贡献者，无论技术水平如何
2. **包容**: 欢迎不同背景和观点的贡献者
3. **建设性**: 提供建设性的反馈和建议
4. **耐心**: 对新手保持耐心和帮助态度

#### 沟通渠道
- **GitHub Issues**: 技术讨论和问题报告
- **GitHub Discussions**: 一般讨论和想法交流
- **Pull Request评论**: 代码审查和技术细节

### 贡献者认可

#### 贡献类型
- **代码贡献**: 实现新功能、修复bug
- **文档贡献**: 改进文档、翻译
- **测试贡献**: 添加测试、报告bug
- **设计贡献**: UI/UX改进、视觉设计
- **社区贡献**: 回答问题、帮助新手

#### 认可方式
- 在CONTRIBUTORS.md中列出所有贡献者
- 在Release Notes中感谢主要贡献者
- 为活跃贡献者提供Collaborator权限

### 开发环境设置

#### 前置要求
- Python 3.8+
- pip或conda包管理器
- Git

#### 本地开发设置
```bash
# 1. 克隆仓库
git clone https://github.com/Keldon-Pro/City-Tour-Agent.git
cd City-Tour-Agent

# 2. 创建虚拟环境
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# 3. 安装依赖
pip install -r requirements.txt

# 4. 配置环境变量
cp env.example .env
# 编辑.env文件，填入必要的API密钥

# 5. 运行测试
python -m pytest tests/

# 6. 启动应用
python App/app.py
```

#### 代码质量工具
- **Linting**: 使用pylint或flake8
- **Formatting**: 使用black
- **Type Checking**: 使用mypy
- **Testing**: 使用pytest

---

## 版本历史

### 开发版本 (Development) - 2025年9月

#### 最新提交记录

**commit dd4626b** (2025-09-29 20:45:25)
- **类型**: chore - 项目配置优化
- **内容**: 优化项目配置和模型下载功能
- **作者**: Keldon
- **影响**: 改进项目构建和模型管理流程

**commit 38eba1f** (2025-09-29 20:15:05)
- **类型**: fix - UI修复
- **内容**: 修改行程表按钮位置
- **作者**: Keldon
- **影响**: 改善用户界面交互体验

**commit 59efbe9** (2025-09-29 19:37:08)
- **类型**: chore - 项目初始化
- **内容**: initial commit (fresh reset)
- **作者**: Keldon
- **影响**: 项目重新初始化，建立新的起点

#### 当前开发状态

**已实现功能**:
- ✅ MCP客户端封装器实现
- ✅ 旅行偏好设置功能
- ✅ 文档上传和处理功能
- ✅ 高德地图集成
- ✅ 基础Web界面
- ✅ 行程表功能
- ✅ 照片展示功能

**技术架构**:
- ✅ RAG (Retrieval-Augmented Generation) 系统
- ✅ Function Calling支持
- ✅ 远程MCP服务集成
- ✅ 嵌入式缓存机制
- ✅ Gunicorn生产环境配置

**文档完善度**:
- ✅ 应用架构文档
- ✅ 功能实现说明
- ✅ 技术原理文档
- ✅ 管理平台设计文档
- ✅ 提交规范文档

