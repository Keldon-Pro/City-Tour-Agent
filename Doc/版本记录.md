# 版本记录

## 提交规范 (Commit Convention)

为了保持项目历史的清晰性和可维护性，请严格遵循以下提交信息规范：

### 提交信息格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Type 类型说明

- **feat**: 新功能 (feature)
- **fix**: 修复bug
- **docs**: 文档更新
- **style**: 代码格式调整（不影响代码运行的变动）
- **refactor**: 重构（既不是新增功能，也不是修改bug的代码变动）
- **perf**: 性能优化
- **test**: 增加或修改测试
- **build**: 影响构建系统或外部依赖的变动
- **ci**: 修改CI配置文件和脚本
- **chore**: 其他不修改src或test文件的变动
- **revert**: 回滚之前的提交

### Scope 范围说明

- **app**: 应用主体功能
- **mcp**: MCP客户端相关
- **ui**: 用户界面
- **api**: API接口
- **config**: 配置文件
- **docs**: 文档
- **test**: 测试相关
- **deps**: 依赖管理

### 提交信息示例

```bash
# 新功能
feat(app): 添加旅行偏好设置功能

实现用户旅行偏好的保存和读取功能，包括：
- 旅行目的选择
- 预算范围设置
- 住宿偏好配置

Closes #123

# 修复bug
fix(mcp): 修复MCP客户端连接超时问题

- 增加连接重试机制
- 优化超时处理逻辑
- 添加错误日志记录

# 文档更新
docs(readme): 更新安装和配置说明

# 重构
refactor(app): 重构旅行规划模块

将原有的单一函数拆分为多个职责明确的类，提高代码可维护性

# 性能优化
perf(app): 优化地图数据加载性能

通过缓存机制减少API调用次数，提升页面加载速度约30%
```

### 提交最佳实践

1. **主题行限制在50字符以内**
2. **使用祈使句（如"添加"而不是"添加了"）**
3. **正文每行不超过72字符**
4. **如果提交关闭了issue，在footer中添加 `Closes #issue-number`**
5. **Breaking changes必须在footer中说明，以 `BREAKING CHANGE:` 开头**

### 分支命名规范

- **feature/**: 新功能分支，如 `feature/user-preferences`
- **fix/**: bug修复分支，如 `fix/mcp-connection-timeout`
- **docs/**: 文档更新分支，如 `docs/update-readme`
- **refactor/**: 重构分支，如 `refactor/travel-planner`
- **hotfix/**: 紧急修复分支，如 `hotfix/critical-security-issue`

---

## 版本历史

### 开发版本 (Development) - 2025年10月

#### 最新提交记录

**commit 3ab5c4a** (2025-10-27 15:33:49)
- **类型**: chore(ui) - UI调整
- **内容**: 优化JSON导出按钮的文案和位置
- **作者**: Keldon <keldon@example.com>
- **影响**: 优化用户界面，简化操作文案
- **详细变更**:
  - 将"导出行程为JSON格式"按钮文本改为"导出JSON"
  - 将"一键复制全部"按钮文本改为"复制"
  - 调整导出按钮位置至导入按钮下方

**commit 97b0a2b** (2025-10-26 21:06:16)
- **类型**: merge - 合并分支
- **内容**: Merge pull request #1 "添加了导出为JSON格式的功能"
- **作者**: Keldon <100513341+Keldon-Pro@users.noreply.github.com>
- **影响**: 合并temp分支的JSON导出功能到主分支
- **详细变更**:
  - 合并PR #1，集成JSON导出功能
  - 通过Code Review后的功能合并

**commit 866b7c4** (2025-10-19 21:01:11)
- **类型**: feat(ui) - 新功能
- **内容**: 新增导出为JSON格式功能
- **作者**: 霍尔海鸥 <15371275+hall-seagull@user.noreply.gitee.com>
- **影响**: 增强行程数据可移植性和互操作性
- **详细变更**:
  - 实现行程数据JSON格式导出功能
  - 添加导出按钮和导出对话框
  - 支持一键复制JSON内容

**commit 72197da** (2025-09-30 提交)
- **类型**: docs(readme) - 文档更新
- **内容**: 更新 README 核心理念与排版
- **作者**: Keldon
- **影响**: 强化项目理念传播力与可读性
- **详细变更**:
  - 新增“规划核心理念”两条基础版原则与解释（迭代性 + 人机双向互动）
  - 去除 HTML `<br/>` 换行，采用标准 Markdown 空行
  - 调整段落结构一致性，优化可读性
  - 与版本记录保持语义一致（Human-in-the-Loop / 分阶段规划）

**commit af0a6e3** (2025-09-30 提交)
- **类型**: docs(version) - 版本记录更新
- **内容**: 补充版本记录文档
- **作者**: Keldon
- **影响**: 版本历史与提交规范保持同步，便于追溯
- **详细变更**:
  - 增补此前设计类与文档结构调整的记录位置
  - 确认提交分类（design / version / readme）标签的使用一致性
  - 为后续自动生成 Release Notes 做铺垫

**commit 8ae4b9b** (2025-09-30 提交)
- **类型**: docs(design) - 产品设计文档调整
- **内容**: 调整产品设计文档结构
- **作者**: GitHub Copilot Assistant
- **影响**: 简化文档结构，提高可读性和实用性
- **详细变更**:
  - 简化分阶段规划文档，移除过度复杂的记忆机制整合
  - 优化记忆机制文档的行程表结构说明
  - 保持两个文档的独立性和各自的专业性
  - 确保文档的可读性和实用性

**commit 6e02e98** (2025-09-30 提交)
- **类型**: docs(design) - 产品设计文档完善
- **内容**: 完善产品设计文档架构
- **作者**: GitHub Copilot Assistant
- **影响**: 建立完整的记忆机制设计和分阶段规划体系
- **详细变更**:
  - 新增《记忆机制设计》文档，定义三层记忆架构(L1长期记忆/L2短期记忆/L3临时上下文)
  - 建立上下文裁剪策略：三元素保留模式(长期记忆+短期记忆+最新消息)
  - 完善《分阶段规划》文档，整合记忆机制的状态管理和流程控制
  - 明确长期记忆(旅行信息表)与短期记忆(行程表)的协同工作机制
  - 优化各阶段的停顿点设计，支持基于记忆快照的状态回退

**commit 07f0ff7** (2025-09-30 提交)
- **类型**: docs - 文档更新
- **内容**: 建立开源协作体系和重构文档结构
- **作者**: Keldon
- **影响**: 建立完整的开源项目协作框架，提升项目专业性和社区友好度
- **详细变更**:
  - 添加开源协作文档 (CONTRIBUTING.md, CODE_OF_CONDUCT.md, CONTRIBUTORS.md, LICENSE, ROADMAP.md)
  - 添加GitHub工作流 (welcome.yml, Issue/PR模板)
  - 重构文档结构，重新组织Doc目录
  - 清理历史文件，优化项目配置

**commit dd4626b** (2025-09-29 20:45:25)
- **类型**: chore - 项目配置优化
- **内容**: 优化项目配置和模型下载功能
- **作者**: Keldon
- **影响**: 改进项目构建和模型管理流程

**commit 38eba1f** (2025-09-29 20:15:05)
- **类型**: fix - UI修复
- **内容**: 修改行程表按钮位置
- **作者**: Keldon
- **影响**: 改善用户界面交互体验

**commit 59efbe9** (2025-09-29 19:37:08)
- **类型**: chore - 项目初始化
- **内容**: initial commit (fresh reset)
- **作者**: Keldon
- **影响**: 项目重新初始化，建立新的起点

---

## 当前开发状态

### 已实现功能
- ✅ MCP客户端封装器实现
- ✅ 旅行偏好设置功能
- ✅ 文档上传和处理功能
- ✅ 高德地图集成
- ✅ 基础Web界面
- ✅ 行程表功能
- ✅ 照片展示功能

### 技术架构
- ✅ RAG (Retrieval-Augmented Generation) 系统
- ✅ Function Calling支持
- ✅ 远程MCP服务集成
- ✅ 嵌入式缓存机制
- ✅ Gunicorn生产环境配置

### 文档完善度
- ✅ 应用架构文档
- ✅ 功能实现说明
- ✅ 技术原理文档
- ✅ 管理平台设计文档
- ✅ 产品设计文档
  - ✅ 记忆机制设计（三层记忆架构）
  - ✅ 分阶段规划（景点→酒店→餐厅）
- ✅ 提交规范文档
- ✅ 开源协作体系
- ✅ GitHub工作流配置

### 开源协作状态
- ✅ MIT开源许可证
- ✅ 贡献指南和行为准则
- ✅ Issue和PR模板
- ✅ 自动欢迎新贡献者
- ✅ 完整的协作文档体系

---

**注意**: 本文档将随着项目的发展持续更新，请定期查看最新的提交规范和版本信息。

